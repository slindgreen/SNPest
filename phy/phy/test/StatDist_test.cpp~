#define BOOST_TEST_DYN_LINK

// bost test
#include <boost/test/unit_test.hpp>
#include <boost/test/floating_point_comparison.hpp>

// phy test constants, etc.
#include "phy/test/PhyTestDef.h"

// tested code
// Note the hack to access protected data
#define private public
#define protected public

#include "phy/StatDist.h"

#define private public
#define protected public

// input/output not included by above
#include <boost/numeric/ublas/io.hpp>

// other stuff
#include <boost/foreach.hpp>

using namespace phy;
using namespace phy::grammar;
using boost::unit_test::test_suite;
using namespace std;
 
 
BOOST_AUTO_TEST_CASE(TransitionParser_1) 
{
  ifstream f;
  f.open("data/grammarOneState.txt");
 
  // skipping header for now
  string s;
  getline(f, s);
  getline(f, s);
 
  Transition trans;
  f >> trans;
 
  BOOST_CHECK(trans.name == "0.0");
  BOOST_CHECK(toNumber(trans.p) == 0.9);
}
